<div class="container">
  <header>
    <a href="#">Back to Configure Learning Path</a>
    <h1>MCQ Questions Generator</h1>
    <a href="#">Continue to Configure Learning Path</a>
  </header>
  <section>
    <h5>Assessment: Assessment - Inbound Marketing</h5>
    <h5>Course: Skill Assessment - Digital Marketing</h5>
  </section>
</div>

<div class="container">
  <!-- Check if there are no questions -->
  <div *ngIf="!questions || questions.length === 0">
    <p>No questions available. Please generate some questions.</p>
  </div>

  <!-- Section to generate questions -->
  <section *ngIf="questions && questions.length === 0">
    <div class="form-group">
      <label for="input-type">Input Type</label>
      <select id="input-type" [(ngModel)]="inputType">
        <option value="text">Text</option>
        <option value="pdf">PDF</option>
      </select>
    </div>

    <div class="form-group" *ngIf="inputType === 'text'">
      <label for="text-input">Enter your Content here</label>
      <textarea name="text" id="text-input" [(ngModel)]="textInput" cols="40" rows="5"></textarea>
    </div>

    <div class="form-group" *ngIf="inputType === 'pdf'">
      <label for="pdf-upload">Upload PDF</label>
      <div class="file-upload-container">
        <input type="file" id="pdf-upload" accept=".pdf,application/pdf" multiple (change)="onFilesSelected($event)">

        <span class="upload-instruction">You can upload multiple PDF files</span>
        <i class="fas fa-info-circle tooltip">
          <span class="tooltiptext">Hold Ctrl (or Command) to select multiple files.Only PDF files are allowed. </span>
        </i>
      </div>
    </div>

    <div *ngIf="selectedFiles.length > 0">
      <h4>Selected Files</h4>
      <ul class="selected-files-list">
        <li *ngFor="let file of selectedFiles; let i = index" class="selected-file-item">
          <i class="fas fa-file"></i> {{ file.name }}
          <i class="fas fa-trash-alt removeFile delete-icon" (click)="removeFile(i)"></i>
        </li>
      </ul>
    </div>

    <div *ngIf="loading" class="loading-container">
      <mat-spinner></mat-spinner>
    </div>

    <button (click)="generateQuestions()">Generate Questions</button>
  </section>

  <!-- Section to display questions -->
  <div *ngIf="questions && questions.length > 0">
    <h3 class="generated-questions-title">Generated Questions</h3>
    <div *ngFor="let question of questions; let i = index" class="question-card">
      <div class="question-header" (click)="toggleQuestion(i)">
        <h4>Question {{ i + 1 }}: {{ question.title }}</h4>
        <span>{{ question.expanded ? '-' : '+' }}</span>
      </div>
      <div *ngIf="question.expanded" class="question-body">
        <p>{{ question.content }}</p>
        <div *ngFor="let answer of question.answers; let j = index" class="answer-option">
          <input type="radio" name="question-{{i}}" [checked]="answer.isCorrect" [disabled]="true">
          <label>{{ answer.text }}</label>
        </div>
        <div class="question-actions">
          <label for="question-grade-{{ i }}">Grade:</label>
          <div class="space">
            <input type="number" id="question-grade-{{ i }}" [(ngModel)]="question.grade" min="0" max="100">
            <i class="fas fa-trash-alt delete-icon" (click)="deleteQuestion(i)"></i>
        </div>
        </div>
      </div>
    </div>

    <button class="add-new-question" (click)="addNewQuestion()">Save</button>
</div>

</div>
