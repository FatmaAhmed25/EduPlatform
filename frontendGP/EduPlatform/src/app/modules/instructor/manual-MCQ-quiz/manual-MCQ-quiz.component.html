<div class="manual-quiz-container">
  <form [formGroup]="quizForm" (ngSubmit)="submitQuiz()">
    <h3>Create Quiz</h3>
    
    <!-- Quiz Info -->
    <div class="form-section">

      <div class="form-group">
        <label for="totalGrade">Total Grade:</label>
        <input id="totalGrade" formControlName="totalGrade" type="number">
        <div *ngIf="quizForm.get('totalGrade')?.invalid && quizForm.get('totalGrade')?.touched">
          Total Grade is required.
        </div>
      </div>
    </div>

    <!-- Questions -->
    <div class="questions-section" formArrayName="questions">
      <div *ngFor="let question of questions.controls; let questionIndex = index" [formGroupName]="questionIndex" class="question-block">
        <h4>Question {{ questionIndex + 1 }}</h4>

        <div class="form-group">
          <label for="text">Question Text:</label>
          <input id="text" formControlName="text" type="text">
          <div *ngIf="question.get('text')?.invalid && question.get('text')?.touched">
            Question text is required.
          </div>
        </div>

        <div class="form-group">
          <label for="points">Points:</label>
          <input id="points" formControlName="points" type="number">
          <div *ngIf="question.get('points')?.invalid && question.get('points')?.touched">
            Points are required.
          </div>
        </div>

        <div class="form-group">
          <label for="questionType">Question Type:</label>
          <select id="questionType" formControlName="questionType">
            <option value="MCQ">Multiple Choice</option>
            <option value="TF">True/False</option>
          </select>
          <div *ngIf="question.get('questionType')?.invalid && question.get('questionType')?.touched">
            Question type is required.
          </div>
        </div>

        <div formArrayName="answers" class="answers-section">
          <div *ngFor="let answer of getAnswers(questionIndex).controls; let answerIndex = index" [formGroupName]="answerIndex" class="answer-block">
            <div class="form-group">
              <label for="text">Answer {{ answerIndex + 1 }}:</label>
              <input id="text" formControlName="text" type="text">
              <div *ngIf="answer.get('text')?.invalid && answer.get('text')?.touched">
                Answer text is required.
              </div>
            </div>

            <label class="correct-answer">
              <input type="checkbox" formControlName="correct" (change)="toggleCorrectAnswer(questionIndex, answerIndex)">
              Correct
            </label>

            <button type="button" class="btn-remove" (click)="removeAnswer(questionIndex, answerIndex)">Remove Answer</button>
          </div>

          <button type="button" class="btn-add-answer" (click)="addAnswer(questionIndex)">Add Answer</button>
        </div>

        <button type="button" class="btn-remove" (click)="removeQuestion(questionIndex)">Remove Question</button>
      </div>
    </div>

    <!-- Form Buttons -->
    <div class="button-group">
      <button type="button" class="btn-add" (click)="addQuestion()">Add Question</button>
      <button type="submit" class="btn-submit">Submit Quiz</button>
    </div>
  </form>
</div>
